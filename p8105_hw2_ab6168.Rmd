---
title: "p8105_hw2_ab6168"
author: Angelica Bailey
output: github_document
date: "2025-09-24"
---

```{r setup, echo=FALSE, message = FALSE}
library(tidyverse)
library(readxl)
```


## Problem 1
```{r}
#cleaning pols_month dataframe
pols_month_df = 
  read_csv("data/pols-month.csv") |> 
  separate(mon,
    into = c("year", "month","day"), sep = "-") |> 
  mutate(year = as.numeric(year),
    month = case_match(
      month,
      "01" ~ "jan",
      "02" ~ "feb",
      "03" ~ "mar",
      "04" ~ "apr",
      "05" ~ "may",
      "06" ~ "jun",
      "07" ~ "jul",
      "08" ~ "aug",
      "09" ~ "sep",
      "10" ~ "oct",
      "11" ~ "nov",
      "12" ~ "dec"),
    prez_gop = case_match(
      prez_gop,
      0 ~ "dem",
      1 ~ "gop"
    ),
    president = prez_gop) |> 
  select(-day,-prez_gop,-prez_dem)



#cleaning snp dataframe
snp_df = 
  read_csv("data/snp.csv") |> 
  separate(date,
    into = c("month", "day","year"), sep = "/") |> 
  mutate(year = as.numeric(year),
         year = case_when(
           year > 15 ~ year + 1900,
           year <= 15 ~ year + 2000
         ),
         month = case_match(
           month,
           "1" ~ "jan",
           "2" ~ "feb",
           "3" ~ "mar",
           "4" ~ "apr",
           "5" ~ "may",
           "6" ~ "jun",
           "7" ~ "jul",
           "8" ~ "aug",
           "9" ~ "sep",
           "10" ~ "oct",
           "11" ~ "nov",
           "12" ~ "dec")
        ) |> 
  select(-day) |> 
  relocate(year)




#cleaning unemployment dataframe
unemployment_df = 
  read_csv("data/unemployment.csv") |> 
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "per_unemp"
  ) |> 
  mutate(month = tolower(month), 
           year = Year) |> 
  select(-Year) |> 
  relocate(year)

```


Joining datasets

```{r}
#merging `pols` and `snp` datasets
pols_snp_df =
  left_join(pols_month_df, snp_df, by = "year") 

#merging `unemployment` with result
fte_df =
  left_join(pols_snp_df, unemployment_df, by = "year")
```

Description

The `pols_month` dataset shows the number of national politicians who are democratic or republican at any given time. It contains the number of republican governors, senators, and representatives on the associated date as well as on the democratic side. The `snp` dataset shows the closing values of the Standard & Poor's stock market index on the associated date. Lastly, the `unemployment` dataset displays percentages of unemployment by month and year. After joining these datasets, the resulting dataset has 113,124 rows and 13 columns. The total range of years is from 1947 to 2015. The key variables of the dataset include `president`,`close`, `per_unmep`.


## Problem 2

Reading and tidying excel files
```{r}
mr_trash_df = 
  read_excel("data/trash-wheel.xlsx", sheet = "Mr. Trash Wheel") |> 
  select(-...15,-...16) |> 
  janitor::clean_names() |> 
  rename(
    weight = "weight_tons",
    volume = "volume_cubic_yards") |> 
  filter(row_number() <= n() - 2) |>   
  mutate(sports_balls = as.integer(round(sports_balls)),
         year = as.integer(year),
         wheel_name = "mr_trash")
  
prof_trash_df = 
  read_excel("data/trash-wheel.xlsx", sheet = "Professor Trash Wheel") |>
  janitor::clean_names() |> 
  rename(
    weight = "weight_tons",
    volume = "volume_cubic_yards") |> 
  filter(row_number() <= n() - 3) |> 
  mutate(wheel_name = "professor_trash")

gwyn_trash_df =
  read_excel("data/trash-wheel.xlsx", sheet = "Gwynnda Trash Wheel") |> 
  janitor::clean_names() |> 
  rename(
    weight = "weight_tons",
    volume = "volume_cubic_yards") |> 
  filter(row_number() <= n() - 1) |> 
  mutate(wheel_name = "gwynnda_trash")

```


Binding datasets
```{r}
trash_wheel_df =
  bind_rows(mr_trash_df, prof_trash_df, gwyn_trash_df) |> 
  relocate(wheel_name)
```



June 2022 Gywnnda dataset 
```{r}
june2022_gwyn = filter(gwyn_trash_df, month == "June" & year == 2022)
```




Description

There are `nrow(trash_wheel_df)` observations in the resulting dataset. Among the variables, the total weight of trash collected by Professor Trash Wheel is `sum(prof_trash_df$weight)` tons. The total number of cigarette butts collected by Gwynnda in June of 2022 is  `sum(june2022_gwyn$cigarette_butts)`.

